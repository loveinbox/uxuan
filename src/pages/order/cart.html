<ion-view class="create-order"
  view-title="U选到家">
  <ion-content class="singePage cart-page has-footer">
    <section class="order-address"
      ng-click="getAddress()">
      <div class="add-address"
        ng-hide="status.isAdded">
        添加收货地址
      </div>
      <div ng-hide="!status.isAdded"
        class="current-address">
        <span class="fromWeChat fr">修改地址</span>
        <div class="current-address-name">
          {{order.user.rcvName}}
        </div>
        <div class="current-address-tel"
          ng-bind="order.user.rcvPhone">
        </div>
        <div class="current-address-string">
          {{order.user.rcvAddress}}
        </div>
      </div>
    </section>
    <section uxuan-time></section>
    <section class="order-server">
      <span>选择管家</span>
      <div class="row">
        <div ng-repeat="eG in order.eGuards"
          class="text-center col-33">
          <img class="guard-header"
            ng-src="{{eG.eguardHeaderImg || '../img/avator.jpeg'}}"
            big-pic>
          <label class="text-center"
            style="display: block;">
            <input type="radio"
              name="eGuard"
              ng-checked="$first"
              value={{eG.eguardId}}
              ng-model="order.guard">
            <span>{{eG.eguardName}}</span>
          </label>
        </div>
      </div>
    </section>
    <ion-list class="good-list-in-order">
      <ion-item ng-repeat="shop in order.carts"
        ng-class="{'not-reach': !shop.isReachStartPrice}">
        <div class="order-cart-shop clearfix">
          <label class="clearfix">
            <div class="check-good fl">
              <input type="checkbox"
                ng-model="shop.isChecked"
                ng-click="pickShop($event, shop)">
            </div>
            <div class="fl"><img class="shop-img"
                ng-src="http://lifeuxuan.com/{{shop.shopInfo.shopPicUrl}}"></div>
            <div class="cart-shop-name"><span>{{shop.shopInfo.shopName}}</span></div>
            <div class="calculate-money fr">
              <span class="totalMoney">￥{{shop.singleCartTotalNumber/100|number:2}}</span>
              <p class="sendPrice"
                ng-if="type == 'furit'">含运费{{shop.shopInfo.sendPrice}}元</p>
              <p class="sendPrice sendStartPrice"
                ng-hide="shop.isReachStartPrice"
                ng-class="{'danger': !isReachStartPrice}"
                ng-if="type == 'furit'">起送价{{shop.shopInfo.sendStartPrice}}元</p>
              <p class="sendPrice"
                ng-hide="shop.isReachStartPrice"
                ng-if="type == 'wash'">含运费{{shop.shopInfo.sendPrice}}元</p>
              <p class="sendPrice sendStartPrice"
                ng-hide="shop.isReachStartPrice"
                ng-class="{'danger': !isReachStartPrice}"
                ng-if="type == 'wash'">满{{shop.shopInfo.sendStartPrice}}元免运费</p>
            </div>
          </label>
        </div>
        <div class="order-cart-goods clearfix">
          <ion-list class="clearfix">
            <ion-item ng-repeat="good in shop.productsList">
              <label class="clearfix">
                <div class="check-good fl">
                  <input type="checkbox"
                    ng-model="good.isChecked"
                    ng-click="pickShopGood($event, good, shop)">
                </div>
                <div class="fl"><img class="cart-detail-img"
                    ng-src="http://lifeuxuan.com/{{good.productHeadImg}}"></div>
                <div class="cart-goods-info">
                  <p class="sendPrice">{{good.productName}}</p>
                  <p class="sendPrice sendStartPrice">￥{{good.productPrice/100}}</p>
                </div>
              </label>
              <div single-cart
                class="order-cart-action"></div>
          </ion-list>
        </div>
        </ion-item>
    </ion-list>
  </ion-content>
  <ion-footer-bar class="order-cart"
    ng-if="order.isReserve">
    <div class="bottom-bar shopping-cart-bar shopping-cart-bar-wash">
      <div class="button button-assertive button-full go-wash-cart"
        ng-click="confirmOrder($event)">确认预约</div>
    </div>
  </ion-footer-bar>
  <ion-footer-bar class="order-cart"
    ng-if="!order.isReserve">
    <label class="pick-all">
      <input type="checkbox"
        name=""
        ng-model="order.isAllChecked"
        ng-click="pickAll()">
      <span>全选</span>
    </label>
    <div class="total-price">
      <span>总价</span>
      <span>￥{{order.totalMoney/100}}</span>
    </div>
    <div class="button confirm-cart"
      ng-click="confirmOrder($event)"
      ng-class="{'disable-pay': orderButton.isDisabled}">{{payButton.text}}</div>
  </ion-footer-bar>
</ion-view>
